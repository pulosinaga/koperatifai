
# KoperatifAI - Kernel Stability Protocol
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # 1. Jika file fisik (seperti .tsx, .js, .css) benar-benar ada, layani langsung
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]

    # 2. Paksa MIME Type untuk file TypeScript/React agar bisa diproses Babel di browser
    # Aturan ini sangat krusial untuk memperbaiki galat "Unexpected token '<'"
    RewriteCond %{REQUEST_URI} \.(tsx|ts|jsx)$ [NC]
    RewriteRule ^ - [T=application/javascript,L]

    # 3. Fallback untuk navigasi Single Page App (hanya jika bukan file fisik)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.html [L]
</IfModule>

<IfModule mod_mime.c>
    # Tambahkan tipe MIME ke sistem server
    AddType application/javascript .ts
    AddType application/javascript .tsx
    AddType application/javascript .js
</IfModule>

<IfModule mod_headers.c>
    # Nonaktifkan cache agresif selama masa perbaikan sistem
    <FilesMatch "\.(tsx|ts|js|html)$">
        Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires 0
    </FilesMatch>
</IfModule>
